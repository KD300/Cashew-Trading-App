<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cashew Trading Tool</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f3f4f6;
    }
    .container {
      max-width: 1000px;
      margin: 20px auto;
      padding: 20px;
      background-color: white;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    h1 {
      text-align: center;
      color: #1e40af;
      margin-bottom: 20px;
    }
    .input-section {
      background-color: #eff6ff;
      padding: 20px;
      border-radius: 8px;
      margin-bottom: 20px;
    }
    .results-section {
      background-color: #f0fdf4;
      padding: 20px;
      border-radius: 8px;
    }
    .form-group {
      margin-bottom: 15px;
    }
    label {
      display: block;
      font-weight: 500;
      margin-bottom: 5px;
      color: #374151;
    }
    input[type="number"] {
      width: 100%;
      padding: 8px;
      border: 1px solid #d1d5db;
      border-radius: 4px;
    }
    button {
      background-color: #2563eb;
      color: white;
      border: none;
      padding: 10px 15px;
      border-radius: 4px;
      cursor: pointer;
      width: 100%;
      font-weight: bold;
    }
    button:hover {
      background-color: #1d4ed8;
    }
    .result-card {
      background-color: white;
      padding: 15px;
      border-radius: 6px;
      margin-bottom: 15px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }
    .result-title {
      font-weight: bold;
      margin-bottom: 10px;
      color: #4b5563;
    }
    .decision {
      font-size: 18px;
      font-weight: bold;
      padding: 10px;
      margin-top: 10px;
      text-align: center;
      border-radius: 4px;
    }
    .decision.sell {
      background-color: #dcfce7;
      color: #166534;
    }
    .decision.hold {
      background-color: #fef3c7;
      color: #92400e;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Cashew Trading Decision Tool</h1>
    
    <div class="input-section">
      <h2>Trading Inputs</h2>
      
      <div class="form-group">
        <label for="localPriceNaira">Today's Local Price (Naira)</label>
        <input type="number" id="localPriceNaira" placeholder="Enter local price">
      </div>
      
      <div class="form-group">
        <label for="existingStockCost">Existing Stock CnF Cost (USD)</label>
        <input type="number" id="existingStockCost" placeholder="Enter stock cost">
      </div>
      
      <div class="form-group">
        <label for="buyerBid">Buyer's Bid (USD)</label>
        <input type="number" id="buyerBid" placeholder="Enter buyer bid">
      </div>
      
      <div class="form-group">
        <label for="fxRate">FX Rate (Naira to USD)</label>
        <input type="number" id="fxRate" placeholder="Enter FX rate">
      </div>
      
      <div class="form-group">
        <label for="amountRemitted">Amount Remitted (Naira)</label>
        <input type="number" id="amountRemitted" placeholder="Enter amount remitted">
      </div>
      
      <div class="form-group">
        <label for="stockQuantity">Existing Stock Quantity (Tons)</label>
        <input type="number" id="stockQuantity" placeholder="Enter stock quantity">
      </div>
      
      <button onclick="calculateDecision()">Calculate</button>
    </div>
    
    <div class="results-section">
      <h2>Trading Decisions</h2>
      
      <div class="result-card">
        <div class="result-title">Price Conversions</div>
        <div>Local Price (USD): <span id="localPriceUsd">$0.00</span></div>
        <div>Relevant Cost for Margin: <span id="relevantCost">$0.00</span></div>
      </div>
      
      <div class="result-card">
        <div class="result-title">Margin Analysis</div>
        <div>Gross Margin: <span id="grossMargin">0.0%</span></div>
        <div id="decision" class="decision">Enter values and click Calculate</div>
      </div>
      
      <div class="result-card">
        <div class="result-title">Target Buy Prices (Naira)</div>
        <div>For 6% Margin: ₦<span id="price6">0.00</span></div>
        <div>For 7% Margin: ₦<span id="price7">0.00</span></div>
        <div>For 8% Margin: ₦<span id="price8">0.00</span></div>
      </div>
    </div>
  </div>

  <script>
    function calculateDecision() {
      // Get input values
      const localPriceNaira = parseFloat(document.getElementById('localPriceNaira').value) || 0;
      const existingStockCost = parseFloat(document.getElementById('existingStockCost').value) || 0;
      const buyerBid = parseFloat(document.getElementById('buyerBid').value) || 0;
      const fxRate = parseFloat(document.getElementById('fxRate').value) || 0;
      const amountRemitted = parseFloat(document.getElementById('amountRemitted').value) || 0;
      const stockQuantity = parseFloat(document.getElementById('stockQuantity').value) || 0;
      
      // Calculate local price in USD
      const localPriceUsd = fxRate ? localPriceNaira / fxRate : 0;
      
      // Calculate relevant cost (higher of existing stock cost or local price in USD)
      const relevantCost = Math.max(existingStockCost, localPriceUsd);
      
      // Calculate gross margin
      const grossMargin = buyerBid ? ((buyerBid - relevantCost) / buyerBid) * 100 : 0;
      
      // Determine decision
      let decision = "HOLD - Manual Override Required";
      let decisionClass = "hold";
      let quantity = 0;
      
      if (grossMargin >= 6 && grossMargin < 7) {
        decision = "SELL (100 tons)";
        decisionClass = "sell";
        quantity = 100;
      } else if (grossMargin >= 7 && grossMargin < 9) {
        decision = "SELL (200 tons)";
        decisionClass = "sell";
        quantity = 200;
      } else if (grossMargin >= 9) {
        decision = "SELL (300 tons)";
        decisionClass = "sell";
        quantity = 300;
      }
      
      // Calculate target buy prices
      const price6 = buyerBid && fxRate ? (buyerBid * (1 - 0.06)) * fxRate : 0;
      const price7 = buyerBid && fxRate ? (buyerBid * (1 - 0.07)) * fxRate : 0;
      const price8 = buyerBid && fxRate ? (buyerBid * (1 - 0.08)) * fxRate : 0;
      
      // Update display
      document.getElementById('localPriceUsd').textContent = `$${localPriceUsd.toFixed(2)}`;
      document.getElementById('relevantCost').textContent = `$${relevantCost.toFixed(2)}`;
      document.getElementById('grossMargin').textContent = `${grossMargin.toFixed(1)}%`;
      document.getElementById('decision').textContent = decision;
      document.getElementById('decision').className = `decision ${decisionClass}`;
      document.getElementById('price6').textContent = price6.toFixed(2);
      document.getElementById('price7').textContent = price7.toFixed(2);
      document.getElementById('price8').textContent = price8.toFixed(2);
    }
  </script>
</body>
</html>
